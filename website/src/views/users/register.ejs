<!DOCTYPE html>
<html lang="en">
<%- include ("../partials/head") %>


    <body>
        <header class="j-space-between bgc-header font-color header">
            <%- include ("../partials/header-home") %>
        </header>

        <main class="main-register display-flex">
            <% const invalid="is-invalid" %>
                <form class="form-register" action="/user/register" method="post" enctype="multipart/form-data">
                    <h2 class="margin-10" style="text-align: center;">
                        Crea Tu cuenta
                    </h2>
                    <section class="formularies">
                        <div>
                            <div class="m-formularies">
                                <label for="name"></label>
                                <input class="form-control <%= locals.errors && errors.name? 'is-invalid': '' %> "
                                    name="name" id="name" placeholder="Nombre" <%if(locals.oldData && oldData.name){%>
                                value="<%=oldData.name%>"
                                    <% } %>>
                                        <% if(locals.errors && errors.name) { %>
                                            <div class=" text-danger">
                                                <p>
                                                    <%=errors.name.msg%>
                                                </p>
                                            </div>
                                            <% } %>
                            </div>

                            <div class=" m-formularies">
                                <label for="lastname"></label>
                                <input class=" formularies-deco flex-q-1 form-control 
                                <%= locals.errors && errors.lastName ? 'is-invalid' : '' %> " name="lastName"
                                    id="lastName" placeholder="Apellido" <% if(locals.oldData && oldData.name) { %>
                                value="<%=oldData.lastName%> "
                                    <% } %>>
                                        <% if( locals.errors && errors.lastName) { %>
                                            <div class="text-danger">
                                                <p>
                                                    <%= errors.lastName.msg %>
                                                </p>
                                            </div>
                                            <% } %>
                            </div>

                            <div class=" text-center">
                                <img src="/img/line.png" style="width: 15%;" alt="">
                            </div>
                            <div class="m-formularies">
                                <label> Pais/Region</label>
                                <select class="flex-q-1 form-control formularies-deco 
                                <%= locals.errors && errors.country ? 'is-invalid' : '' %> " name="country">
                                    <option value="">Elige un pais</option>
                                    <%const
                                        paises=['Argentina','Mexico','Chile','Uruguay','Colombia','Venezuela','Brasil','Bolivia','USA']
                                        %>
                                        <% for(const pais of paises) { %>
                                            <option value="<%=pais %>" <%=locals.oldData && (oldData.country==pais)
                                                ? "selected" : "" %> >
                                                <%=pais %>
                                            </option>
                                            <% } %>
                                </select>
                                <% if(locals.errors && errors.country) { %>
                                    <div class="text-danger">
                                        <p>
                                            <%= errors.country.msg %>
                                        </p>
                                    </div>
                                    <% } %>

                            </div class="m-formularies">

                            <div class="m-formularies">
                                <label>Fecha Nacimiento:</label>
                                <input class=" formularies-deco flex-q-1 form-control
                                <%= locals.errors && errors.dateBirth ? 'is-invalid' : '' %> " type="date"
                                    name="dateBirth" id="date-time" <%if(locals.oldData && oldData.dateBirth) { %>
                                value="<%=oldData.dateBirth%>"
                                    <% } %>>
                                        <% if(locals.errors && errors.dateBirth) { %>
                                            <div class="text-danger">
                                                <p>
                                                    <%= errors.dateBirth.msg %>
                                                </p>
                                            </div>
                                            <% } %>
                            </div>
                            <div class=" text-center">
                                <img src="/img/line.png" style="width: 15%;" alt="">
                            </div>
                            <div class="m-formularies">
                                <label for="Email"></label>
                                <input class=" formularies-deco flex-q-1 form-control
                                <%= locals.errors && errors.email ? 'is-invalid' : '' %> " name="email"
                                    placeholder="Email" id="email" <%if(locals.oldData && oldData.email) { %>
                                value="<%=oldData.email%>"
                                    <% } %>>
                                        <% if( locals.errors && errors.email) { %>
                                            <div class="text-danger">
                                                <p>
                                                    <%= errors.email.msg %>
                                                </p>
                                            </div>
                                            <% } %>
                            </div>
                            <div class="m-formularies">
                                <label for="password"></label>
                                <input class=" formularies-deco flex-q-1 form-control
                                <%= locals.errors && errors.password ? 'is-invalid' : '' %> " type="password"
                                    name="password" id="password" placeholder="Contraseña">
                                <% if(locals.errors && errors.password) { %>
                                    <div class="text-danger">
                                        <p>
                                            <%= errors.password.msg %>
                                        </p>
                                    </div>
                                    <% } %>
                            </div>
                            <div class="m-formularies">
                                <label for="password"></label>
                                <input class=" formularies-deco flex-q-1 form-control
                                <%= locals.errors && errors.confirmPassword ? 'is-invalid' : '' %> " type="password"
                                    name="confirmPassword" id="password" placeholder="Confirmar contraseña">
                                <% if(locals.errors && errors.confirmPassword) { %>
                                    <div class="text-danger">
                                        <p>
                                            <%= errors.confirmPassword.msg %>
                                        </p>
                                    </div>
                                    <% } %>
                            </div>
                            <div class=" text-center">
                                <img src="/img/line.png" style="width: 15%;" alt="">
                            </div>
                            <div class="m-formularies">
                                <label for="address"> </label>
                                <input class=" formularies-deco flex-q-1 form-control
                                <%= locals.errors && errors.lastName ? 'is-invalid' : '' %> " type=" text"
                                    name="streetAddress" placeholder="Domicilio" id="address" <%if(locals.oldData &&
                                    oldData.name) { %>
                                value="<%=oldData.streetAddress%>"
                                    <% } %>>
                                        <% if(locals.errors && errors.streetAddress) { %>
                                            <div class="text-danger">
                                                <p>
                                                    <%= errors.streetAddress.msg %>
                                                </p>
                                            </div>
                                            <% } %>
                            </div>
                            <div class="m-formularies">
                                <label>Interes:</label>
                                <select class="boton-deco" name="buySell" id="favoriteCategory">
                                    <option value="comprar">comprar</option>
                                    <option value="vender">vender</option>
                                </select>
                            </div>
                            <div class="m-formularies checkbox-container">
                                <label>Seleciones Categorias Favoritas:</label>
                                <% const categories=["catgoria1","catgoria2","catgoria3","catgoria4"] %>
                                    <% for(category of categories) { %>
                                        <div class="flex-q-1">
                                            <label for="">
                                                <%= category%>
                                            </label>
                                            <input type="checkbox" name="favoriteCategory" value="<%=category%>"
                                                <%=locals.oldData && (oldData.favoriteCategory===category) ? "checked"
                                                : "" %>>
                                        </div>
                                        <% } %>
                            </div>

                            <div class="m-formularies">
                                <label for="avatar">Seleccione una imagen</label>
                                <input class="form-control 
                                <%=locals.errors && errors.avatar ? 'is-invalid' : ''%>" type="file" name="avatar"
                                    id="avatar">
                                <div class="text-danger">
                                    <% if(locals.errors && errors.avatar) {%>
                                        <%= errors.avatar.msg %>
                                            <% } %>
                                </div>
                            </div>

                            <div class="m-formularies">
                                <button class="continuar-deco" type="submit">Continuar</button>
                                <button class="borrar-deco" type="reset">Borrar</button>
                            </div>
                        </div>
                    </section>

                </form>
        </main>
        <footer>
            <%- include('../partials/footer.ejs') %>
        </footer>
        <%- include('../partials/scripts-boostrap.ejs') %>

        <script src = "js/register.js"></script>
    </body>

</html>